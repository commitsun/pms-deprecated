<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template
        id="portal_my_home_menu_precheckin"
        name="Portal layout : precheckin menu entries"
        inherit_id="portal.portal_breadcrumbs"
        priority="30"
    >
        <xpath expr="//ol[hasclass('o_portal_submenu')]" position="inside">
            <li
                t-if="page_name == 'precheckin'"
                t-attf-class="breadcrumb-item #{'active ' if not reservations else ''}"
            >
                <a t-attf-href="/my/precheckin?{{ keep_query() }}">Precheckin</a>
            </li>
            <li t-if="reservation" class="breadcrumb-item active">
                 <a t-attf-href="/my/precheckin?{{ keep_query() }}">Precheckin/</a>
                <t t-esc="reservation.name" />
            </li>
        </xpath>
    </template>
    <template
        id="portal_my_precheckins"
        name="Precheckins"
        inherit_id="portal.portal_my_home"
        customize_show="True"
        priority="40"
    >
        <xpath expr="//div[hasclass('o_portal_docs')]" position="inside">
            <t t-call="portal.portal_docs_entry">
                <t t-set="title">Precheckin</t>
                <t t-set="url" t-value="'/my/precheckins'" />
                <t t-set="placeholder_count" t-value="'checkin_count'" />
            </t>
        </xpath>
    </template>
    <template id="portal_my_precheckin" name="My PreCheckins">
      <t t-call="portal.portal_layout">
        <t t-set="breadcrumbs_searchbar" t-value="True" />

        <t t-call="portal.portal_searchbar">
            <t t-set="title">Precheckins</t>
        </t>
        <t t-if="not reservations">
            <p>There are currently no reservations for your account.</p>
        </t>
        <t t-if="reservations" t-call="portal.portal_table">
            <thead>
                <tr class="active">
                    <th>PreCheckin #</th>
                </tr>
            </thead>
            <tbody>
                <t t-foreach="reservations" t-as="reservation">
                    <t t-set="folio" t-value="reservation.folio_id" />
                    <!-- Sacar folio-->
                    <t t-if="reservation == folio.reservation_ids[0]">
                        <tr class="bg-light">
                            <td colspan="4"><em
                                        class="font-weight-normal text-muted"
                                    ><span />Folio: </em>
                            <a>
                                <t t-esc="folio.name" />
                            </a>
                        </td>
                        </tr>
                    </t>
                    <tr class="bg-light">
                        <td colspan="4"><em
                                        class="font-weight-normal text-muted"
                                    ><span />Reservation: </em>
                            <a
                                    t-att-href="reservation.get_portal_url()"
                                    t-att-title="reservation.name"
                                >
                                <t t-esc="reservation.name" />
                            </a>
                        </td>
                    </tr>
                    <t t-foreach="reservation.checkin_partner_ids" t-as="checkin_partner">
                        <tr>
                            <td>
                                <a>Checkin</a>
                            </td>
                        </tr>
                    </t>
                </t>
            </tbody>
        </t>
      </t>
    </template>
</odoo>
