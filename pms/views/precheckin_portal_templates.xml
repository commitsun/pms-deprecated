<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template id="portal_my_precheckin_detail" name="My Precheckin">
        <t t-call="portal.portal_layout">
            <t t-set="additional_title">Contact Details</t>
            <form action="/my/precheckin" method="post">
                <div t-if="error_message" class="alert alert-danger" role="alert">
                    <t t-foreach="error_message" t-as="err"><t t-esc="err" /><br /></t>
                </div>
                <div t-if="success" class="alert alert-success" role="alert">
                    <span>Data saved successfully!</span>
                </div>
                <div class="row o_portal_details">
                    <div t-attf-class="form-group col-xl-6 d-none">
                        <input
                            type="number"
                            name="id"
                            t-attf-class="form-control"
                            t-att-value="id or checkin_partner.id"
                        />

                    </div>
                    <div class="col-lg-12">
                        <div class="row">
                            <div t-attf-class="form-group col-xl-6">
                                <label
                                    class="col-form-label"
                                    for="firstname"
                                >Name</label>
                                <input
                                    t-att-class="error"
                                    type="text"
                                    name="firstname"
                                    t-attf-class="form-control"
                                    t-att-value="firstname or checkin_partner.firstname"
                                />
                            </div>
                            <div t-attf-class="form-group col-xl-6">
                                <label
                                    class="col-form-label"
                                    for="lastname"
                                >Lastname</label>
                                <input
                                    type="text"
                                    name="lastname"
                                    t-attf-class="form-control"
                                    t-att-value="lastname or checkin_partner.lastname"
                                />
                            </div>
                            <div t-attf-class="form-group col-xl-6">
                                <label
                                    class="col-form-label"
                                    for="lastname2"
                                > Second Lastname</label>
                                <input
                                    type="text"
                                    name="lastname2"
                                    t-attf-class="form-control"
                                    t-att-value="lastname2 or checkin_partner.lastname2"
                                />
                            </div>
                            <div t-attf-class="form-group col-xl-6">
                                <label
                                    class="col-form-label"
                                    for="birthdate_date"
                                > Birth Date</label>
                                <input
                                    type="date"
                                    name="birthdate_date"
                                    t-attf-class="form-control #{error.get('birthdate_date') and 'is-invalid' or ''}"
                                    t-att-value="birth_date or checkin_partner.birthdate_date"
                                />
                            </div>
                            <div t-attf-class="form-group col-xl-6">
                                <label
                                    class="col-form-label"
                                    for="gender"
                                >Gender</label>
                                <select
                                    class="form-control"
                                    id="gender"
                                    name="gender"
                                    t-att-value="gender or checkin_partner.gender"
                                >
                                    <option value="female">Female</option>
                                    <option value="male">Male</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div t-attf-class="form-group col-xl-6">
                                <label
                                    class="col-form-label"
                                    for="document_type"
                                >Doc. type</label>
                                <select
                                    class="form-control"
                                    id="doc_type_id"
                                    name="document_type"
                                    t-att-value="document_type or checkin_partner.document_type"
                                >
                                    <option value="D">DNI</option>
                                    <option value="C">Driving License</option>
                                    <option value="I">Identification Document</option>
                                    <option value="N">Spanish residence permit</option>
                                    <option value="X">European residence permit</option>
                                </select>
                            </div>
                            <div t-attf-class="form-group col-xl-6">
                                <label
                                    class="col-form-label"
                                    for="document_number"
                                >Doc. number</label>
                                <input
                                    type="text"
                                    name="document_number"
                                    t-attf-class="form-control #{error.get('document_number') and 'is-invalid' or ''}"
                                    t-att-value="doc_number or checkin_partner.document_number"
                                />
                            </div>
                            <div t-attf-class="form-group col-xl-6">
                                <label
                                    class="col-form-label"
                                    for="document_expedition_date"
                                >Doc. expedition date</label>
                                <input
                                    type="date"
                                    name="document_expedition_date"
                                    t-attf-class="form-control #{error.get('document_expedition_date') and 'is-invalid' or ''}"
                                    t-att-value="doc_exp_date or checkin_partner.document_expedition_date"
                                />
                            </div>
                            <div t-attf-class="form-group col-xl-6">
                                <label
                                    class="col-form-label"
                                    for="mobile"
                                >Mobile</label>
                                <input
                                    type="phone"
                                    name="mobile"
                                    t-attf-class="form-control #{error.get('mobile') and 'is-invalid' or ''}"
                                    t-att-value="mobile or checkin_partner.mobile"
                                />
                            </div>
                            <div t-attf-class="form-group col-xl-6">
                                <label class="col-form-label" for="email">Email</label>
                                <input
                                    type="email"
                                    name="email"
                                    t-attf-class="form-control #{error.get('email') and 'is-invalid' or ''}"
                                    t-att-value="email or checkin_partner.email"
                                />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="clearfix">
                    <button type="submit" class="btn btn-primary float-right mb32 ">
                        Confirm
                        <span class="fa fa-long-arrow-right" />
                    </button>
                </div>
            </form>
        </t>
    </template>
    <template id="portal_my_reservation_precheckin" name="Precheckin Reservation">
        <t t-call="portal.portal_layout">
            <t t-if="not reservation.checkin_partner_ids">
                <p
                >There are currently no precheckins in this reserva for your account.</p>
            </t>
            <t t-if="reservation.checkin_partner_ids" t-call="portal.portal_table">
                <thead>
                    <tr class="active">
                        <th>PreCheckin in Reservation <span
                                t-field="reservation.name"
                            /></th>
                    </tr>
                </thead>
                <tbody>
                    <t t-set="count" t-value="0" />
                    <form
                        class="collapse"
                        action="/my/precheckin/folio_reservation"
                        method="get"
                    >
                        <div
                            t-if="error_message"
                            class="alert alert-danger"
                            role="alert"
                        >
                            <t t-foreach="error_message" t-as="err"><t t-esc="err" /><br
                                /></t>
                        </div>
                        <div t-if="success" class="alert alert-success" role="alert">
                            <span>Data saved successfully!</span>
                        </div>
                        <t
                            t-foreach="reservation.checkin_partner_ids"
                            t-as="checkin_partner"
                        >
                            <t t-set="id1" t-value="'counter'+ str(count)" />
                            <t t-set="id2" t-value="'#'" />
                            <t t-set="id3" t-value="id2+id1" />
                            <t t-set="idcheckin" t-value="'checkin' + str(count)" />
                            <t t-set="count" t-value="count+1" />

                            <tr>
                                <td colspan="4">
                                    <a t-att-href="checkin_partner.get_portal_url()">
                                        Checkin <t t-esc="count" />
                                    </a>
                                    <a
                                        data-toggle="collapse"
                                        t-att-data-target="id3"
                                        class="text-primary"
                                    >
                                        <span class="fa fa-chevron-down fa-sm" />
                                    </a>

                                    <div class="row o_portal_details">
                                        <div class="col-lg-8">
                                            <div class="row collapse" t-att-id="id1">
                                                <div t-attf-class="form-group col-xl-6">
                                                    <label
                                                        class="col-form-label"
                                                        for="firstname"
                                                    >Name</label>
                                                    <input
                                                        type="text"
                                                        t-att-name="'firstname-' + str(count)"
                                                        t-attf-class="form-control"
                                                        t-att-value="firstname or checkin_partner.firstname"
                                                    />
                                                </div>
                                                <div t-attf-class="form-group col-xl-6">
                                                    <label
                                                        class="col-form-label"
                                                        for="lastname"
                                                    >Lastname</label>
                                                    <input
                                                        type="text"
                                                        t-att-name="'lastname-' + str(count)"
                                                        t-attf-class="form-control"
                                                        t-att-value="lastname or checkin_partner.lastname"
                                                    />
                                                </div>
                                                <div t-attf-class="form-group col-xl-6">
                                                    <label
                                                        class="col-form-label"
                                                        for="lastname2"
                                                    > Second Lastname</label>
                                                    <input
                                                        type="text"
                                                        t-att-name="'lastname2-' + str(count)"
                                                        t-attf-class="form-control"
                                                        t-att-value="lastname2 or checkin_partner.lastname2"
                                                    />
                                                </div>
                                                <div t-attf-class="form-group col-xl-6">
                                                    <label
                                                        class="col-form-label"
                                                        for="birthdate_date"
                                                    > Birth Date</label>
                                                    <input
                                                        type="date"
                                                        t-att-name="'birthdate_date-'+ str(count)"
                                                        t-attf-class="form-control"
                                                        t-att-value="birthdate_date or checkin_partner.birthdate_date"
                                                    />
                                                </div>
                                                <div t-attf-class="form-group col-xl-6">
                                                    <label
                                                        class="col-form-label"
                                                        for="gender"
                                                    >Gender</label>
                                                    <select
                                                        class="form-control"
                                                        id="gender"
                                                        t-att-name="'gender-'+ str(count)"
                                                        t-att-value="gender or checkin_partner.gender"
                                                    >
                                                        <option
                                                            value="female"
                                                        >Female</option>
                                                        <option
                                                            value="male"
                                                        >Male</option>
                                                        <option
                                                            value="other"
                                                        >Other</option>
                                                    </select>
                                                </div>
                                                <div t-attf-class="form-group col-xl-6">
                                                    <label
                                                        class="col-form-label"
                                                        for="document_type"
                                                    >Doc. type</label>
                                                    <select
                                                        class="form-control"
                                                        id="doc_type_id"
                                                        t-att-name="'document_type-'+ str(count)"
                                                        t-att-value="document_type or checkin_partner.document_type"
                                                    >
                                                        <option value="D">DNI</option>
                                                        <option
                                                            value="P"
                                                        >Passport</option>
                                                        <option
                                                            value="C"
                                                        >Driving License</option>
                                                        <option
                                                            value="I"
                                                        >Identification Document</option>
                                                        <option
                                                            value="N"
                                                        >Spanish residence permit</option>
                                                        <option
                                                            value="X"
                                                        >European residence permit</option>
                                                    </select>
                                                </div>
                                                <div t-attf-class="form-group col-xl-6">
                                                    <label
                                                        class="col-form-label"
                                                        for="document_number"
                                                    >Doc. number</label>
                                                    <input
                                                        type="text"
                                                        t-att-name="'document_number-'+ str(count)"
                                                        t-attf-class="form-control"
                                                        t-att-value="document_number or checkin_partner.document_number"
                                                    />
                                                </div>
                                                <div t-attf-class="form-group col-xl-6">
                                                    <label
                                                        class="col-form-label"
                                                        for="document_expedition_date"
                                                    >Doc. expedition date</label>
                                                    <input
                                                        type="date"
                                                        t-att-name="'document_expedition_date-'+ str(count)"
                                                        t-attf-class="form-control"
                                                        t-att-value="document_expedition_date or checkin_partner.document_expedition_date"
                                                    />
                                                </div>
                                                <div t-attf-class="form-group col-xl-6">
                                                    <label
                                                        class="col-form-label"
                                                        for="mobile"
                                                    >Mobile</label>
                                                    <input
                                                        type="phone"
                                                        t-att-name="'mobile-'+ str(count)"
                                                        t-attf-class="form-control"
                                                        t-att-value="mobile or checkin_partner.mobile"
                                                    />
                                                </div>
                                                <div t-attf-class="form-group col-xl-6">
                                                    <label
                                                        class="col-form-label"
                                                        for="email"
                                                    >Email</label>
                                                    <input
                                                        type="email"
                                                        t-att-name="'email-'+ str(count)"
                                                        t-attf-class="form-control"
                                                        t-att-value="email or checkin_partner.email"
                                                    />
                                                </div>
                                                <div
                                                    t-attf-class="form-group col-xl-6 d-none"
                                                >
                                                    <input
                                                        type="text"
                                                        t-att-name="'id-'+ str(count)"
                                                        t-attf-class="form-control"
                                                        t-att-value="id or checkin_partner.id"
                                                    />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </t>

                        <div t-attf-class="form-group col-xl-6 d-none">
                            <input
                                type="text"
                                t-att-name="'reservation_id'"
                                t-attf-class="form-control"
                                t-att-value="reservation_id or reservation.id"
                            />
                        </div>
                        <tr>
                            <td>
                                <div class="clearfix">
                                    <button
                                        type="submit"
                                        class="btn btn-primary float-right mb32 "
                                    >
                                        Confirm
                                        <span class="fa fa-long-arrow-right" />
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </form>
                </tbody>
            </t>
        </t>
    </template>
    <template id="portal_my_folio_precheckin" name="Precheckin Folio">
        <t t-call="portal.portal_layout">
            <t t-if="not folio.reservation_ids">
                <p
                >There are currently no reservations in this folio for your account.</p>
            </t>
            <t t-if="folio.reservation_ids" t-call="portal.portal_table">
                <thead>
                    <tr class="active">
                        <th>PreCheckin in Folio <span t-field="folio.name" /></th>
                    </tr>
                </thead>
                <tbody>
                    <t t-set="count" t-value="0" />
                    <form
                        class="collapse"
                        action="/my/precheckin/folio_reservation"
                        method="get"
                    >
                        <div
                            t-if="error_message"
                            class="alert alert-danger"
                            role="alert"
                        >
                            <t t-foreach="error_message" t-as="err"><t t-esc="err" /><br
                                /></t>
                        </div>
                        <div t-if="success" class="alert alert-success" role="alert">
                            <span>Data saved successfully!</span>
                        </div>
                        <t t-foreach="folio.reservation_ids" t-as="reservation">
                            <t t-set="count_reservation" t-value="0" />
                            <tr class="bg-light">
                                <td colspan="4"><em
                                        class="font-weight-normal text-muted"
                                    ><span />Reservation: </em>
                                    <a
                                        t-att-href="reservation.get_portal_url(suffix='/precheckin')"
                                        t-att-title="reservation.name"
                                    >
                                        <t t-esc="reservation.name" />
                                    </a>
                                </td>
                            </tr>
                            <t
                                t-foreach="reservation.checkin_partner_ids"
                                t-as="checkin_partner"
                            >
                                <t t-set="id1" t-value="'counter'+ str(count)" />
                                <t t-set="id2" t-value="'#'" />
                                <t t-set="id3" t-value="id2+id1" />
                                <t t-set="idcheckin" t-value="'checkin' + str(count)" />
                                <t t-set="count" t-value="count+1" />
                                <t
                                    t-set="count_reservation"
                                    t-value="count_reservation+1"
                                />

                                <tr>
                                    <td colspan="4">
                                        <a
                                            t-att-href="checkin_partner.get_portal_url()"
                                        >
                                            Checkin <t t-esc="count_reservation" />
                                        </a>
                                        <a
                                            data-toggle="collapse"
                                            t-att-data-target="id3"
                                            class="text-primary"
                                        >
                                            <span class="fa fa-chevron-down fa-sm" />
                                        </a>
                                        <div class="row o_portal_details">
                                            <div class="col-lg-8">
                                                <div
                                                    class="row collapse"
                                                    t-att-id="id1"
                                                >
                                                    <div
                                                        t-attf-class="form-group col-xl-6"
                                                    >
                                                        <label
                                                            class="col-form-label"
                                                            for="firstname"
                                                        >Name</label>
                                                        <input
                                                            type="text"
                                                            t-att-name="'firstname-' + str(count)"
                                                            t-attf-class="form-control"
                                                            t-att-value="firstname or (checkin_partner.firstname)"
                                                        />
                                                    </div>
                                                    <div
                                                        t-attf-class="form-group col-xl-6"
                                                    >
                                                        <label
                                                            class="col-form-label"
                                                            for="lastname"
                                                        >Lastname</label>
                                                        <input
                                                            type="text"
                                                            t-att-name="'lastname-' + str(count)"
                                                            t-attf-class="form-control"
                                                            t-att-value="lastname or checkin_partner.lastname"
                                                        />
                                                    </div>
                                                    <div
                                                        t-attf-class="form-group col-xl-6"
                                                    >
                                                        <label
                                                            class="col-form-label"
                                                            for="lastname2"
                                                        > Second Lastname</label>
                                                        <input
                                                            type="text"
                                                            t-att-name="'lastname2-' + str(count)"
                                                            t-attf-class="form-control"
                                                            t-att-value="lastname2 or checkin_partner.lastname2"
                                                        />
                                                    </div>
                                                    <div
                                                        t-attf-class="form-group col-xl-6"
                                                    >
                                                        <label
                                                            class="col-form-label"
                                                            for="birthdate_date"
                                                        > Birth Date</label>
                                                        <input
                                                            type="date"
                                                            t-att-name="'birthdate_date-'+ str(count)"
                                                            t-attf-class="form-control"
                                                            t-att-value="birthdate_date or checkin_partner.birthdate_date"
                                                        />
                                                    </div>
                                                    <div
                                                        t-attf-class="form-group col-xl-6"
                                                    >
                                                        <label
                                                            class="col-form-label"
                                                            for="gender"
                                                        >Gender</label>
                                                        <select
                                                            class="form-control"
                                                            id="gender"
                                                            t-att-name="'gender-'+ str(count)"
                                                            t-att-value="gender or checkin_partner.gender"
                                                        >
                                                            <option
                                                                value="female"
                                                            >Female</option>
                                                            <option
                                                                value="male"
                                                            >Male</option>
                                                            <option
                                                                value="other"
                                                            >Other</option>
                                                        </select>
                                                    </div>
                                                    <div
                                                        t-attf-class="form-group col-xl-6"
                                                    >
                                                        <label
                                                            class="col-form-label"
                                                            for="document_type"
                                                        >Doc. type</label>
                                                        <select
                                                            class="form-control"
                                                            id="doc_type_id"
                                                            t-att-name="'document_type-'+ str(count)"
                                                            t-att-value="document_type or checkin_partner.document_type"
                                                        >
                                                            <option
                                                                value="D"
                                                            >DNI</option>
                                                            <option
                                                                value="P"
                                                            >Passport</option>
                                                            <option
                                                                value="C"
                                                            >Driving License</option>
                                                            <option
                                                                value="I"
                                                            >Identification Document</option>
                                                            <option
                                                                value="N"
                                                            >Spanish residence permit</option>
                                                            <option
                                                                value="X"
                                                            >European residence permit</option>
                                                        </select>
                                                    </div>
                                                    <div
                                                        t-attf-class="form-group col-xl-6"
                                                    >
                                                        <label
                                                            class="col-form-label"
                                                            for="document_number"
                                                        >Doc. number</label>
                                                        <input
                                                            type="text"
                                                            t-att-name="'document_number-'+ str(count)"
                                                            t-attf-class="form-control"
                                                            t-att-value="document_number or checkin_partner.document_number"
                                                        />
                                                    </div>
                                                    <div
                                                        t-attf-class="form-group col-xl-6"
                                                    >
                                                        <label
                                                            class="col-form-label"
                                                            for="document_expedition_date"
                                                        >Doc. expedition date</label>
                                                        <input
                                                            type="date"
                                                            t-att-name="'document_expedition_date-'+ str(count)"
                                                            t-attf-class="form-control"
                                                            t-att-value="document_expedition_date or checkin_partner.document_expedition_date"
                                                        />
                                                    </div>
                                                    <div
                                                        t-attf-class="form-group col-xl-6"
                                                    >
                                                        <label
                                                            class="col-form-label"
                                                            for="mobile"
                                                        >Mobile</label>
                                                        <input
                                                            type="phone"
                                                            t-att-name="'mobile-'+ str(count)"
                                                            t-attf-class="form-control #{error.get('mobile') and 'is-invalid' or ''}"
                                                            t-att-value="mobile or checkin_partner.mobile"
                                                        />
                                                    </div>
                                                    <div
                                                        t-attf-class="form-group col-xl-6"
                                                    >
                                                        <label
                                                            class="col-form-label"
                                                            for="email"
                                                        >Email</label>
                                                        <input
                                                            type="email"
                                                            t-att-name="'email-'+ str(count)"
                                                            t-attf-class="form-control"
                                                            t-att-value="email or checkin_partner.email"
                                                        />
                                                    </div>
                                                    <div
                                                        t-attf-class="form-group col-xl-6 d-none"
                                                    >
                                                        <input
                                                            type="text"
                                                            t-att-name="'id-'+ str(count)"
                                                            t-attf-class="form-control"
                                                            t-att-value="id or checkin_partner.id"
                                                        />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </t>
                        </t>
                        <div t-attf-class="form-group col-xl-6 d-none">
                            <input
                                type="text"
                                t-att-name="'folio_id'"
                                t-attf-class="form-control"
                                t-att-value="folio_id or folio.id"
                            />
                        </div>
                        <tr>
                            <td>
                                <div class="clearfix">
                                    <button
                                        type="submit"
                                        class="btn btn-primary float-right mb32 "
                                    >
                                        Confirm
                                        <span class="fa fa-long-arrow-right" />
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </form>
                </tbody>
            </t>
        </t>
    </template>
</odoo>
